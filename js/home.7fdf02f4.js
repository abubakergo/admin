(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{bb51:function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ion-page",[null==t.resilers?e("div",{staticStyle:{"margin-top":"50%"}},[e("ion-row",[e("ion-col",{attrs:{size:"12"}},[e("ion-item",[e("ion-input",{staticClass:"ion-text-center",attrs:{type:"password",value:t.pass},on:{input:function(n){t.pass=n.target.value}}})],1)],1),e("ion-col",{attrs:{size:"12"}},[e("ion-button",{attrs:{expand:"block"},on:{click:t.login}},[t._v("\n          login\n        ")])],1)],1)],1):e("div",[null==t.resiler?e("div",[e("ion-row",[e("ion-col",t._l(t.resilers,function(n,i){return e("ion-list",{key:i},[e("ion-item",{on:{click:function(e){t.resiler=n}}},[e("ion-label",[t._v(t._s(n.n))]),e("ion-label",[t._v(t._s(n.p))]),e("ion-label",[t._v(t._s(n.b))])],1)],1)}),1)],1),e("ion-fab",{attrs:{horizontal:"end",vertical:"bottom"}},[e("ion-fab-button",{attrs:{size:"small"},on:{click:function(n){t.resiler="create"}}},[e("ion-icon",{attrs:{name:"add"}})],1)],1)],1):e("div",["create"==t.resiler?e("div",{staticStyle:{"margin-top":"50%"}},[e("ion-row",[e("ion-col",[e("ion-item",[e("ion-input",{staticClass:"ion-text-center",attrs:{value:t.name,placeholder:"اﻹسم"},on:{input:function(n){t.name=n.target.value}}})],1)],1)],1),e("ion-row",[e("ion-col",[e("ion-item",[e("ion-input",{staticClass:"ion-text-center",attrs:{value:t.phone,inputmode:"numeric",maxlength:"10",placeholder:"0000000000"},on:{input:function(n){t.phone=n.target.value}}})],1)],1)],1),e("ion-row",[e("ion-col",[e("ion-button",{attrs:{expand:"block"},on:{click:t.create}},[t._v("\n            save\n          ")])],1)],1),e("br"),e("ion-row",[e("ion-col",{staticClass:"ion-text-center"},[e("ion-button",{on:{click:function(n){t.resiler=null}}},[t._v("\n            back\n          ")])],1)],1)],1):e("div",{staticStyle:{"margin-top":"50%"}},[e("ion-row",[e("ion-col",{staticClass:"ion-text-center"},[e("div",[t._v(t._s(t.resiler.n))]),e("div",[t._v(t._s(t.resiler.p))]),e("div",[t._v(t._s(t.resiler.b))])])],1),e("ion-row",{staticClass:"ion-justify-content-center"},[e("ion-col",{attrs:{size:"auto"}},[e("ion-button",{on:{click:function(n){return t.addBalance(50)}}},[t._v("\n            +50\n          ")])],1),e("ion-col",{attrs:{size:"auto"}},[e("ion-button",{on:{click:function(n){return t.addBalance(500)}}},[t._v("\n            +500\n          ")])],1),e("ion-col",{attrs:{size:"auto"}},[e("ion-button",{on:{click:function(n){return t.addBalance(1e3)}}},[t._v("\n            +1000\n          ")])],1)],1),e("ion-row",[e("ion-col",{staticClass:"ion-text-center"},[e("ion-button",{on:{click:function(n){t.resiler=null}}},[t._v("\n            back\n          ")])],1)],1),e("ion-fab",{attrs:{horizontal:"start",vertical:"bottom"}},[e("ion-fab-button",{attrs:{size:"small",color:"danger"},on:{click:t.remove}},[e("ion-icon",{attrs:{name:"trash"}})],1)],1)],1)])])])},s=[],o={name:"home",data(){return{resilers:null,pass:null,resiler:null,name:null,phone:null}},methods:{async login(){const t=await fetch(`${this.server}/admin/resilers/login/${this.pass}`,{method:"POST"}),n=t.status;if(200==n){const n=await t.json();this.resilers=n.reverse()}else console.log(t.statusText)},async addBalance(t){const n=await fetch(`${this.server}/admin/resilers/balance/${this.pass}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({p:this.resiler.p,b:t})}),e=n.status;if(200==e){const t=await n.json();this.resiler.b=t,this.resilers.forEach(n=>{n.p==this.resiler.p&&(n.b=t)})}else console.log(n.statusText)},async create(){const t=await fetch(`${this.server}/admin/resilers/${this.pass}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({n:this.name,p:this.phone})}),n=t.status;200==n?(this.resilers.unshift({n:this.name,p:this.phone,b:0}),this.resiler=null):console.log(t.statusText)},async remove(){if(confirm("حذف ؟")){const t=await fetch(`${this.server}/admin/resilers/${this.resiler.p}/${this.pass}`,{method:"DELETE"}),n=t.status;if(200==n){const t=this.resiler.p;this.resilers=this.resilers.filter(n=>n.p!=t),this.resiler=null}else console.log(t.statusText)}}}},a=o,r=e("2877"),l=Object(r["a"])(a,i,s,!1,null,null,null);n["default"]=l.exports}}]);
//# sourceMappingURL=home.7fdf02f4.js.map